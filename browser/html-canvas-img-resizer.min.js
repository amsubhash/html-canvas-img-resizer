var htmlCanvasImgResizer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=e.dragCornerBoxSize||20,n=e.cropImageRLT,r=e.cropMaskColor||"rgba(0, 0, 0, 0.5)",o=e.cropCornerColor||"green",i=e.cropCornerLineWidth||5,a=document.getElementById(e.id);if(!a)throw Error("Please provide a valid html element Id to work with");var s=document.createElement("div");s.setAttribute("style","width:100%; height:100%; position:relative"),a.appendChild(s);var d=document.createElement("canvas");d.setAttribute("style","max-width:100%; max-height:100%; position:absolute; top:0; left:0");var l=document.createElement("canvas");l.setAttribute("style","max-width:100%; max-height:100%; position:absolute; top:0; left:0");var u=document.createElement("canvas");u.setAttribute("style","display:none");var p=document.createElement("div"),h=document.createElement("div"),c=document.createElement("div"),x=document.createElement("div"),v=document.createElement("div");x.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: sw-resize; background: transparent; stroke: transparent;"),c.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: se-resize; background: transparent; stroke: transparent;"),h.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: ne-resize; background: transparent; stroke: transparent;"),p.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: nw-resize; background: transparent; stroke: transparent;"),v.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: all-scroll; background: transparent; stroke: transparent;"),s.appendChild(u),s.appendChild(d),s.appendChild(l),s.appendChild(v),s.appendChild(x),s.appendChild(c),s.appendChild(h),s.appendChild(p);var m=d.getContext("2d");if(!m)throw Error("Not able to create canvas");var y=l.getContext("2d");if(!y)throw Error("Not able to create canvas");var f,w=u.getContext("2d");if(!w)throw Error("Not able to create canvas");var g=!1,b=!1,E=!1,L=!1,C=!1,T=new Image;return T.src=e.imageURL,T.onload=function(){d.width=T.width,d.height=T.height,l.width=d.clientWidth,l.height=d.clientHeight,l.addEventListener("mouseup",s,!1),l.addEventListener("mousemove",M,!1),m.drawImage(T,0,0),x.addEventListener("mousedown",(function(){b=!0}),!1),x.addEventListener("mouseup",s,!1),x.addEventListener("mousemove",M,!1),p.addEventListener("mousedown",(function(){g=!0}),!1),p.addEventListener("mouseup",s,!1),p.addEventListener("mousemove",M,!1),h.addEventListener("mousedown",(function(){E=!0}),!1),h.addEventListener("mouseup",s,!1),h.addEventListener("mousemove",M,!1),c.addEventListener("mousedown",(function(){L=!0}),!1),c.addEventListener("mouseup",s,!1),c.addEventListener("mousemove",M,!1),v.addEventListener("mousedown",(function(){C=!0}),!1),v.addEventListener("mouseup",s,!1),v.addEventListener("mousemove",M,!1);var e={x:0,y:0,w:d.clientWidth,h:d.clientHeight};function s(){g=E=b=L=C=!1}f=function(){var t=T.width/l.width,r=T.height/l.height,o=e.x*t,i=e.y*r,a=e.w*t,s=e.h*r;u.width=a,u.height=s,w.drawImage(T,o,i,a,s,0,0,a,s),n&&n(u.toDataURL())};var k=0,A=0;function M(t){if(!a)throw Error("Not able to create canvas");var n=t.pageX-a.offsetLeft,r=t.pageY-a.offsetTop;g?(e.w+=e.x-n,e.h+=e.y-r,e.x=n,e.y=r):E?(e.w=Math.abs(e.x-n),e.h+=e.y-r,e.y=r):b?(e.w+=e.x-n,e.h=Math.abs(e.y-r),e.x=n):L?(e.w=Math.abs(e.x-n),e.h=Math.abs(e.y-r)):C&&(e.x+=n-k,e.y+=r-A),e.x<0&&(e.x=0),e.x+e.w>l.width&&(e.x=l.width-e.w),e.y<0&&(e.y=0),e.y+e.h>l.height&&(e.y=l.height-e.h),k=n,A=r,S()}function S(){if(!y)throw Error("Not able to create canvas");y.clearRect(0,0,l.width,l.height),y.fillStyle=r,y.strokeStyle=o,y.lineWidth=i,y.fillRect(0,0,l.width,l.height),y.clearRect(e.x,e.y,e.w,e.h),y.beginPath(),y.moveTo(e.x,e.y+t),y.lineTo(e.x,e.y),y.lineTo(e.x+t,e.y),y.moveTo(e.x+e.w-t,e.y),y.lineTo(e.x+e.w,e.y),y.lineTo(e.x+e.w,e.y+t),y.moveTo(e.x+e.w,e.y+e.h-t),y.lineTo(e.x+e.w,e.y+e.h),y.lineTo(e.x+e.w-t,e.y+e.h),y.moveTo(e.x+t,e.y+e.h),y.lineTo(e.x,e.y+e.h),y.lineTo(e.x,e.y+e.h-t),y.stroke(),p.style.top=h.style.top=e.y+"px",p.style.left=x.style.left=e.x+"px",h.style.left=c.style.left=e.x+e.w-t+"px",x.style.top=c.style.top=e.y+e.h-t+"px",v.style.top=e.y+"px",v.style.left=e.x+"px",v.style.width=e.w+"px",v.style.height=e.h+"px",f()}S()},w}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9odG1sQ2FudmFzSW1nUmVzaXplci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9odG1sQ2FudmFzSW1nUmVzaXplci8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm9wdGlvbnMiLCJkcmFnQ29ybmVyQm94U2l6ZSIsImNyb3BJbWFnZVJMVCIsImNyb3BNYXNrQ29sb3IiLCJjcm9wQ29ybmVyQ29sb3IiLCJjcm9wQ29ybmVyTGluZVdpZHRoIiwiaW1hZ2VEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJFcnJvciIsImNvbnRhaW5lckRpdiIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImltYWdlQ2FudmFzIiwiY3JvcENhbnZhcyIsImV4cG9ydENhbnZhcyIsInRvcExlZnRDb3JuZXJEaXYiLCJ0b3BSaWdodENvcm5lckRpdiIsImJvdHRvbVJpZ2h0Q29ybmVyRGl2IiwiYm90dG9tTGVmdENvcm5lckRpdiIsInNlbGVjdGlvbkRpdiIsImltYWdlQ2FudmFzQ3R4IiwiZ2V0Q29udGV4dCIsImNyb3BDYW52YXNDdHgiLCJkcmF3RXhwb3J0Q2FudmFzIiwiZXhwb3J0Q2FudmFzQ3R4IiwiZHJhZ1RvcExlZnQiLCJkcmFnQm90dG9tTGVmdCIsImRyYWdUb3BSaWdodCIsImRyYWdCb3R0b21SaWdodCIsImRyYWdCb3giLCJpbWFnZSIsIkltYWdlIiwic3JjIiwiaW1hZ2VVUkwiLCJvbmxvYWQiLCJ3aWR0aCIsImhlaWdodCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1vdXNlVXAiLCJtb3VzZU1vdmUiLCJkcmF3SW1hZ2UiLCJzZWxlY3Rpb24iLCJ4IiwieSIsInciLCJoIiwic2NhbGVYIiwic2NhbGVZIiwidG9EYXRhVVJMIiwibW91c2VQcmV2WCIsIm1vdXNlUHJldlkiLCJlIiwibW91c2VYIiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwibW91c2VZIiwicGFnZVkiLCJvZmZzZXRUb3AiLCJNYXRoIiwiYWJzIiwiZHJhdyIsImNsZWFyUmVjdCIsImZpbGxTdHlsZSIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiZmlsbFJlY3QiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJzdHlsZSIsInRvcCIsImxlZnQiXSwibWFwcGluZ3MiOiJxQ0FDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUEwRGYsT0FyREFGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFB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QU14RCxFQUFxQnVELE1BQU1DLElBQ3pEOUIsRUFBVUUsRUFBSUYsRUFBVUksRUFBSWpELEVBQW9CLEtBQ2xEcUIsRUFBYXFELE1BQU1DLElBQU05QixFQUFVRSxFQUFJLEtBQ3ZDMUIsRUFBYXFELE1BQU1FLEtBQU8vQixFQUFVQyxFQUFJLEtBQ3hDekIsRUFBYXFELE1BQU1yQyxNQUFRUSxFQUFVRyxFQUFJLEtBQ3pDM0IsRUFBYXFELE1BQU1wQyxPQUFTTyxFQUFVSSxFQUFJLEtBQzFDeEIsSUFHRnVDLEtBRUt0QyIsImZpbGUiOiJodG1sLWNhbnZhcy1pbWctcmVzaXplci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbnRlcmZhY2UgT3ByaW9ucyB7XG4gIGlkOiBzdHJpbmc7XG4gIGltYWdlVVJMOiBzdHJpbmc7XG4gIGNyb3BJbWFnZVJMVDogKGltYWdlVVJMOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNyb3BNYXNrQ29sb3I/OiBzdHJpbmc7XG4gIGNyb3BDb3JuZXJDb2xvcj86IHN0cmluZztcbiAgY3JvcENvcm5lckxpbmVXaWR0aD86IG51bWJlcjtcbiAgZHJhZ0Nvcm5lckJveFNpemU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IChvcHRpb25zOiBPcHJpb25zKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0+IHtcbiAgY29uc3QgZHJhZ0Nvcm5lckJveFNpemUgPSBvcHRpb25zLmRyYWdDb3JuZXJCb3hTaXplIHx8IDIwO1xuICBjb25zdCBjcm9wSW1hZ2VSTFQgPSBvcHRpb25zLmNyb3BJbWFnZVJMVDtcbiAgY29uc3QgY3JvcE1hc2tDb2xvciA9IG9wdGlvbnMuY3JvcE1hc2tDb2xvciB8fCAncmdiYSgwLCAwLCAwLCAwLjUpJztcbiAgY29uc3QgY3JvcENvcm5lckNvbG9yID0gb3B0aW9ucy5jcm9wQ29ybmVyQ29sb3IgfHwgJ2dyZWVuJztcbiAgY29uc3QgY3JvcENvcm5lckxpbmVXaWR0aCA9IG9wdGlvbnMuY3JvcENvcm5lckxpbmVXaWR0aCB8fCA1O1xuXG4gIGNvbnN0IGltYWdlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5pZCk7XG4gIGlmICghaW1hZ2VEaXYpIHtcbiAgICB0aHJvdyBFcnJvcignUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBodG1sIGVsZW1lbnQgSWQgdG8gd29yayB3aXRoJyk7XG4gIH1cbiAgY29uc3QgY29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lckRpdi5zZXRBdHRyaWJ1dGUoXG4gICAgJ3N0eWxlJyxcbiAgICAnd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IHBvc2l0aW9uOnJlbGF0aXZlJ1xuICApO1xuICBpbWFnZURpdi5hcHBlbmRDaGlsZChjb250YWluZXJEaXYpO1xuICBjb25zdCBpbWFnZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICBpbWFnZUNhbnZhcy5zZXRBdHRyaWJ1dGUoXG4gICAgJ3N0eWxlJyxcbiAgICAnbWF4LXdpZHRoOjEwMCU7IG1heC1oZWlnaHQ6MTAwJTsgcG9zaXRpb246YWJzb2x1dGU7IHRvcDowOyBsZWZ0OjAnXG4gICk7XG4gIGNvbnN0IGNyb3BDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgY3JvcENhbnZhcy5zZXRBdHRyaWJ1dGUoXG4gICAgJ3N0eWxlJyxcbiAgICAnbWF4LXdpZHRoOjEwMCU7IG1heC1oZWlnaHQ6MTAwJTsgcG9zaXRpb246YWJzb2x1dGU7IHRvcDowOyBsZWZ0OjAnXG4gICk7XG4gIGNvbnN0IGV4cG9ydENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICBleHBvcnRDYW52YXMuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmUnKTtcblxuICAvLyBkaXYgZm9yIGNsaWNrIHRyYWNrZXJcbiAgY29uc3QgdG9wTGVmdENvcm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCB0b3BSaWdodENvcm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBib3R0b21SaWdodENvcm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBib3R0b21MZWZ0Q29ybmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IHNlbGVjdGlvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBib3R0b21MZWZ0Q29ybmVyRGl2LnNldEF0dHJpYnV0ZShcbiAgICAnc3R5bGUnLFxuICAgIGBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAke2RyYWdDb3JuZXJCb3hTaXplfXB4OyBoZWlnaHQ6ICR7ZHJhZ0Nvcm5lckJveFNpemV9cHg7IHRvcDogMHB4OyBsZWZ0OiAwcHg7IGN1cnNvcjogc3ctcmVzaXplOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgc3Ryb2tlOiB0cmFuc3BhcmVudDtgXG4gICk7XG4gIGJvdHRvbVJpZ2h0Q29ybmVyRGl2LnNldEF0dHJpYnV0ZShcbiAgICAnc3R5bGUnLFxuICAgIGBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAke2RyYWdDb3JuZXJCb3hTaXplfXB4OyBoZWlnaHQ6ICR7ZHJhZ0Nvcm5lckJveFNpemV9cHg7IHRvcDogMHB4OyBsZWZ0OiAwcHg7IGN1cnNvcjogc2UtcmVzaXplOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgc3Ryb2tlOiB0cmFuc3BhcmVudDtgXG4gICk7XG4gIHRvcFJpZ2h0Q29ybmVyRGl2LnNldEF0dHJpYnV0ZShcbiAgICAnc3R5bGUnLFxuICAgIGBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAke2RyYWdDb3JuZXJCb3hTaXplfXB4OyBoZWlnaHQ6ICR7ZHJhZ0Nvcm5lckJveFNpemV9cHg7IHRvcDogMHB4OyBsZWZ0OiAwcHg7IGN1cnNvcjogbmUtcmVzaXplOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgc3Ryb2tlOiB0cmFuc3BhcmVudDtgXG4gICk7XG4gIHRvcExlZnRDb3JuZXJEaXYuc2V0QXR0cmlidXRlKFxuICAgICdzdHlsZScsXG4gICAgYHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6ICR7ZHJhZ0Nvcm5lckJveFNpemV9cHg7IGhlaWdodDogJHtkcmFnQ29ybmVyQm94U2l6ZX1weDsgdG9wOiAwcHg7IGxlZnQ6IDBweDsgY3Vyc29yOiBudy1yZXNpemU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBzdHJva2U6IHRyYW5zcGFyZW50O2BcbiAgKTtcbiAgc2VsZWN0aW9uRGl2LnNldEF0dHJpYnV0ZShcbiAgICAnc3R5bGUnLFxuICAgIGBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAke2RyYWdDb3JuZXJCb3hTaXplfXB4OyBoZWlnaHQ6ICR7ZHJhZ0Nvcm5lckJveFNpemV9cHg7IHRvcDogMHB4OyBsZWZ0OiAwcHg7IGN1cnNvcjogYWxsLXNjcm9sbDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IHN0cm9rZTogdHJhbnNwYXJlbnQ7YFxuICApO1xuXG4gIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChleHBvcnRDYW52YXMpO1xuICBjb250YWluZXJEaXYuYXBwZW5kQ2hpbGQoaW1hZ2VDYW52YXMpO1xuICBjb250YWluZXJEaXYuYXBwZW5kQ2hpbGQoY3JvcENhbnZhcyk7XG4gIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChzZWxlY3Rpb25EaXYpO1xuICBjb250YWluZXJEaXYuYXBwZW5kQ2hpbGQoYm90dG9tTGVmdENvcm5lckRpdik7XG4gIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChib3R0b21SaWdodENvcm5lckRpdik7XG4gIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0b3BSaWdodENvcm5lckRpdik7XG4gIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0b3BMZWZ0Q29ybmVyRGl2KTtcbiAgY29uc3QgaW1hZ2VDYW52YXNDdHggPSBpbWFnZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICBpZiAoIWltYWdlQ2FudmFzQ3R4KSB7XG4gICAgdGhyb3cgRXJyb3IoJ05vdCBhYmxlIHRvIGNyZWF0ZSBjYW52YXMnKTtcbiAgfVxuICBjb25zdCBjcm9wQ2FudmFzQ3R4ID0gY3JvcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICBpZiAoIWNyb3BDYW52YXNDdHgpIHtcbiAgICB0aHJvdyBFcnJvcignTm90IGFibGUgdG8gY3JlYXRlIGNhbnZhcycpO1xuICB9XG4gIGNvbnN0IGV4cG9ydENhbnZhc0N0eCA9IGV4cG9ydENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICBpZiAoIWV4cG9ydENhbnZhc0N0eCkge1xuICAgIHRocm93IEVycm9yKCdOb3QgYWJsZSB0byBjcmVhdGUgY2FudmFzJyk7XG4gIH1cbiAgbGV0IGRyYXdFeHBvcnRDYW52YXM6ICgpID0+IHZvaWQ7XG4gIGxldCBkcmFnVG9wTGVmdCA9IGZhbHNlO1xuICBsZXQgZHJhZ0JvdHRvbUxlZnQgPSBmYWxzZTtcbiAgbGV0IGRyYWdUb3BSaWdodCA9IGZhbHNlO1xuICBsZXQgZHJhZ0JvdHRvbVJpZ2h0ID0gZmFsc2U7XG4gIGxldCBkcmFnQm94ID0gZmFsc2U7XG4gIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gIGltYWdlLnNyYyA9IG9wdGlvbnMuaW1hZ2VVUkw7XG4gIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICBpbWFnZUNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgIGltYWdlQ2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICBjcm9wQ2FudmFzLndpZHRoID0gaW1hZ2VDYW52YXMuY2xpZW50V2lkdGg7XG4gICAgY3JvcENhbnZhcy5oZWlnaHQgPSBpbWFnZUNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgY3JvcENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCwgZmFsc2UpO1xuICAgIGNyb3BDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgaW1hZ2VDYW52YXNDdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICBib3R0b21MZWZ0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vkb3duJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgZHJhZ0JvdHRvbUxlZnQgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBib3R0b21MZWZ0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwLCBmYWxzZSk7XG4gICAgYm90dG9tTGVmdENvcm5lckRpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUsIGZhbHNlKTtcbiAgICB0b3BMZWZ0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vkb3duJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgZHJhZ1RvcExlZnQgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICB0b3BMZWZ0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwLCBmYWxzZSk7XG4gICAgdG9wTGVmdENvcm5lckRpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUsIGZhbHNlKTtcbiAgICB0b3BSaWdodENvcm5lckRpdi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ21vdXNlZG93bicsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRyYWdUb3BSaWdodCA9IHRydWU7XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICAgIHRvcFJpZ2h0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwLCBmYWxzZSk7XG4gICAgdG9wUmlnaHRDb3JuZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgYm90dG9tUmlnaHRDb3JuZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdtb3VzZWRvd24nLFxuICAgICAgKCkgPT4ge1xuICAgICAgICBkcmFnQm90dG9tUmlnaHQgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBib3R0b21SaWdodENvcm5lckRpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCwgZmFsc2UpO1xuICAgIGJvdHRvbVJpZ2h0Q29ybmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZSwgZmFsc2UpO1xuICAgIHNlbGVjdGlvbkRpdi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ21vdXNlZG93bicsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRyYWdCb3ggPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBzZWxlY3Rpb25EaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXAsIGZhbHNlKTtcbiAgICBzZWxlY3Rpb25EaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlLCBmYWxzZSk7XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHc6IGltYWdlQ2FudmFzLmNsaWVudFdpZHRoLFxuICAgICAgaDogaW1hZ2VDYW52YXMuY2xpZW50SGVpZ2h0LFxuICAgIH07XG5cbiAgICBkcmF3RXhwb3J0Q2FudmFzID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2NhbGVYID0gaW1hZ2Uud2lkdGggLyBjcm9wQ2FudmFzLndpZHRoO1xuICAgICAgY29uc3Qgc2NhbGVZID0gaW1hZ2UuaGVpZ2h0IC8gY3JvcENhbnZhcy5oZWlnaHQ7XG4gICAgICBjb25zdCB4ID0gc2VsZWN0aW9uLnggKiBzY2FsZVg7XG4gICAgICBjb25zdCB5ID0gc2VsZWN0aW9uLnkgKiBzY2FsZVk7XG4gICAgICBjb25zdCB3aWR0aCA9IHNlbGVjdGlvbi53ICogc2NhbGVYO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gc2VsZWN0aW9uLmggKiBzY2FsZVk7XG4gICAgICBleHBvcnRDYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgIGV4cG9ydENhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBleHBvcnRDYW52YXNDdHguZHJhd0ltYWdlKFxuICAgICAgICBpbWFnZSxcbiAgICAgICAgeCxcbiAgICAgICAgeSxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgKTtcbiAgICAgIGNyb3BJbWFnZVJMVCAmJiBjcm9wSW1hZ2VSTFQoZXhwb3J0Q2FudmFzLnRvRGF0YVVSTCgpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbW91c2VVcCgpIHtcbiAgICAgIGRyYWdUb3BMZWZ0ID0gZHJhZ1RvcFJpZ2h0ID0gZHJhZ0JvdHRvbUxlZnQgPSBkcmFnQm90dG9tUmlnaHQgPSBkcmFnQm94ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IG1vdXNlUHJldlggPSAwO1xuICAgIGxldCBtb3VzZVByZXZZID0gMDtcblxuICAgIGZ1bmN0aW9uIG1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KSB7XG4gICAgICBpZiAoIWltYWdlRGl2KSB7XG4gICAgICAgIHRocm93IEVycm9yKCdOb3QgYWJsZSB0byBjcmVhdGUgY2FudmFzJyk7XG4gICAgICB9XG4gICAgICBsZXQgbW91c2VYID0gZS5wYWdlWCAtIGltYWdlRGl2Lm9mZnNldExlZnQ7XG4gICAgICBsZXQgbW91c2VZID0gZS5wYWdlWSAtIGltYWdlRGl2Lm9mZnNldFRvcDtcbiAgICAgIGlmIChkcmFnVG9wTGVmdCkge1xuICAgICAgICBzZWxlY3Rpb24udyArPSBzZWxlY3Rpb24ueCAtIG1vdXNlWDtcbiAgICAgICAgc2VsZWN0aW9uLmggKz0gc2VsZWN0aW9uLnkgLSBtb3VzZVk7XG4gICAgICAgIHNlbGVjdGlvbi54ID0gbW91c2VYO1xuICAgICAgICBzZWxlY3Rpb24ueSA9IG1vdXNlWTtcbiAgICAgIH0gZWxzZSBpZiAoZHJhZ1RvcFJpZ2h0KSB7XG4gICAgICAgIHNlbGVjdGlvbi53ID0gTWF0aC5hYnMoc2VsZWN0aW9uLnggLSBtb3VzZVgpO1xuICAgICAgICBzZWxlY3Rpb24uaCArPSBzZWxlY3Rpb24ueSAtIG1vdXNlWTtcbiAgICAgICAgc2VsZWN0aW9uLnkgPSBtb3VzZVk7XG4gICAgICB9IGVsc2UgaWYgKGRyYWdCb3R0b21MZWZ0KSB7XG4gICAgICAgIHNlbGVjdGlvbi53ICs9IHNlbGVjdGlvbi54IC0gbW91c2VYO1xuICAgICAgICBzZWxlY3Rpb24uaCA9IE1hdGguYWJzKHNlbGVjdGlvbi55IC0gbW91c2VZKTtcbiAgICAgICAgc2VsZWN0aW9uLnggPSBtb3VzZVg7XG4gICAgICB9IGVsc2UgaWYgKGRyYWdCb3R0b21SaWdodCkge1xuICAgICAgICBzZWxlY3Rpb24udyA9IE1hdGguYWJzKHNlbGVjdGlvbi54IC0gbW91c2VYKTtcbiAgICAgICAgc2VsZWN0aW9uLmggPSBNYXRoLmFicyhzZWxlY3Rpb24ueSAtIG1vdXNlWSk7XG4gICAgICB9IGVsc2UgaWYgKGRyYWdCb3gpIHtcbiAgICAgICAgc2VsZWN0aW9uLnggKz0gbW91c2VYIC0gbW91c2VQcmV2WDtcbiAgICAgICAgc2VsZWN0aW9uLnkgKz0gbW91c2VZIC0gbW91c2VQcmV2WTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3Rpb24ueCA8IDApIHtcbiAgICAgICAgc2VsZWN0aW9uLnggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGlvbi54ICsgc2VsZWN0aW9uLncgPiBjcm9wQ2FudmFzLndpZHRoKSB7XG4gICAgICAgIHNlbGVjdGlvbi54ID0gY3JvcENhbnZhcy53aWR0aCAtIHNlbGVjdGlvbi53O1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGlvbi55IDwgMCkge1xuICAgICAgICBzZWxlY3Rpb24ueSA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoc2VsZWN0aW9uLnkgKyBzZWxlY3Rpb24uaCA+IGNyb3BDYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIHNlbGVjdGlvbi55ID0gY3JvcENhbnZhcy5oZWlnaHQgLSBzZWxlY3Rpb24uaDtcbiAgICAgIH1cbiAgICAgIG1vdXNlUHJldlggPSBtb3VzZVg7XG4gICAgICBtb3VzZVByZXZZID0gbW91c2VZO1xuICAgICAgZHJhdygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgICBpZiAoIWNyb3BDYW52YXNDdHgpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ05vdCBhYmxlIHRvIGNyZWF0ZSBjYW52YXMnKTtcbiAgICAgIH1cbiAgICAgIGNyb3BDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIGNyb3BDYW52YXMud2lkdGgsIGNyb3BDYW52YXMuaGVpZ2h0KTtcbiAgICAgIGNyb3BDYW52YXNDdHguZmlsbFN0eWxlID0gY3JvcE1hc2tDb2xvcjtcbiAgICAgIGNyb3BDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSBjcm9wQ29ybmVyQ29sb3I7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IGNyb3BDb3JuZXJMaW5lV2lkdGg7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmZpbGxSZWN0KDAsIDAsIGNyb3BDYW52YXMud2lkdGgsIGNyb3BDYW52YXMuaGVpZ2h0KTtcbiAgICAgIGNyb3BDYW52YXNDdHguY2xlYXJSZWN0KFxuICAgICAgICBzZWxlY3Rpb24ueCxcbiAgICAgICAgc2VsZWN0aW9uLnksXG4gICAgICAgIHNlbGVjdGlvbi53LFxuICAgICAgICBzZWxlY3Rpb24uaFxuICAgICAgKTtcbiAgICAgIGNyb3BDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICBjcm9wQ2FudmFzQ3R4Lm1vdmVUbyhzZWxlY3Rpb24ueCwgc2VsZWN0aW9uLnkgKyBkcmFnQ29ybmVyQm94U2l6ZSk7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmxpbmVUbyhzZWxlY3Rpb24ueCwgc2VsZWN0aW9uLnkpO1xuICAgICAgY3JvcENhbnZhc0N0eC5saW5lVG8oc2VsZWN0aW9uLnggKyBkcmFnQ29ybmVyQm94U2l6ZSwgc2VsZWN0aW9uLnkpO1xuICAgICAgY3JvcENhbnZhc0N0eC5tb3ZlVG8oXG4gICAgICAgIHNlbGVjdGlvbi54ICsgc2VsZWN0aW9uLncgLSBkcmFnQ29ybmVyQm94U2l6ZSxcbiAgICAgICAgc2VsZWN0aW9uLnlcbiAgICAgICk7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmxpbmVUbyhzZWxlY3Rpb24ueCArIHNlbGVjdGlvbi53LCBzZWxlY3Rpb24ueSk7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmxpbmVUbyhcbiAgICAgICAgc2VsZWN0aW9uLnggKyBzZWxlY3Rpb24udyxcbiAgICAgICAgc2VsZWN0aW9uLnkgKyBkcmFnQ29ybmVyQm94U2l6ZVxuICAgICAgKTtcbiAgICAgIGNyb3BDYW52YXNDdHgubW92ZVRvKFxuICAgICAgICBzZWxlY3Rpb24ueCArIHNlbGVjdGlvbi53LFxuICAgICAgICBzZWxlY3Rpb24ueSArIHNlbGVjdGlvbi5oIC0gZHJhZ0Nvcm5lckJveFNpemVcbiAgICAgICk7XG4gICAgICBjcm9wQ2FudmFzQ3R4LmxpbmVUbyhcbiAgICAgICAgc2VsZWN0aW9uLnggKyBzZWxlY3Rpb24udyxcbiAgICAgICAgc2VsZWN0aW9uLnkgKyBzZWxlY3Rpb24uaFxuICAgICAgKTtcbiAgICAgIGNyb3BDYW52YXNDdHgubGluZVRvKFxuICAgICAgICBzZWxlY3Rpb24ueCArIHNlbGVjdGlvbi53IC0gZHJhZ0Nvcm5lckJveFNpemUsXG4gICAgICAgIHNlbGVjdGlvbi55ICsgc2VsZWN0aW9uLmhcbiAgICAgICk7XG4gICAgICBjcm9wQ2FudmFzQ3R4Lm1vdmVUbyhcbiAgICAgICAgc2VsZWN0aW9uLnggKyBkcmFnQ29ybmVyQm94U2l6ZSxcbiAgICAgICAgc2VsZWN0aW9uLnkgKyBzZWxlY3Rpb24uaFxuICAgICAgKTtcbiAgICAgIGNyb3BDYW52YXNDdHgubGluZVRvKHNlbGVjdGlvbi54LCBzZWxlY3Rpb24ueSArIHNlbGVjdGlvbi5oKTtcbiAgICAgIGNyb3BDYW52YXNDdHgubGluZVRvKFxuICAgICAgICBzZWxlY3Rpb24ueCxcbiAgICAgICAgc2VsZWN0aW9uLnkgKyBzZWxlY3Rpb24uaCAtIGRyYWdDb3JuZXJCb3hTaXplXG4gICAgICApO1xuICAgICAgY3JvcENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgIHRvcExlZnRDb3JuZXJEaXYuc3R5bGUudG9wID0gdG9wUmlnaHRDb3JuZXJEaXYuc3R5bGUudG9wID1cbiAgICAgICAgc2VsZWN0aW9uLnkgKyAncHgnO1xuICAgICAgdG9wTGVmdENvcm5lckRpdi5zdHlsZS5sZWZ0ID0gYm90dG9tTGVmdENvcm5lckRpdi5zdHlsZS5sZWZ0ID1cbiAgICAgICAgc2VsZWN0aW9uLnggKyAncHgnO1xuICAgICAgdG9wUmlnaHRDb3JuZXJEaXYuc3R5bGUubGVmdCA9IGJvdHRvbVJpZ2h0Q29ybmVyRGl2LnN0eWxlLmxlZnQgPVxuICAgICAgICBzZWxlY3Rpb24ueCArIHNlbGVjdGlvbi53IC0gZHJhZ0Nvcm5lckJveFNpemUgKyAncHgnO1xuICAgICAgYm90dG9tTGVmdENvcm5lckRpdi5zdHlsZS50b3AgPSBib3R0b21SaWdodENvcm5lckRpdi5zdHlsZS50b3AgPVxuICAgICAgICBzZWxlY3Rpb24ueSArIHNlbGVjdGlvbi5oIC0gZHJhZ0Nvcm5lckJveFNpemUgKyAncHgnO1xuICAgICAgc2VsZWN0aW9uRGl2LnN0eWxlLnRvcCA9IHNlbGVjdGlvbi55ICsgJ3B4JztcbiAgICAgIHNlbGVjdGlvbkRpdi5zdHlsZS5sZWZ0ID0gc2VsZWN0aW9uLnggKyAncHgnO1xuICAgICAgc2VsZWN0aW9uRGl2LnN0eWxlLndpZHRoID0gc2VsZWN0aW9uLncgKyAncHgnO1xuICAgICAgc2VsZWN0aW9uRGl2LnN0eWxlLmhlaWdodCA9IHNlbGVjdGlvbi5oICsgJ3B4JztcbiAgICAgIGRyYXdFeHBvcnRDYW52YXMoKTtcbiAgICB9XG5cbiAgICBkcmF3KCk7XG4gIH07XG4gIHJldHVybiBleHBvcnRDYW52YXNDdHg7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==