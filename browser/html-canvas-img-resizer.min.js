var htmlCanvasImgResizer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};t.default=function(e){var t=e.dragCornerBoxSize||20,n=e.cropImageWatcher,a=e.cropMaskColor||"rgba(0, 0, 0, 0.5)",s=e.cropCornerColor||"green",l=e.cropCornerLineWidth||5,u=function(e,t){var n=document.getElementById(e);if(!n)throw Error("Please provide a valid html element Id to work with");var r=document.createElement("div");r.setAttribute("style","width:100%; height:100%; position:relative"),n.appendChild(r);var i=document.createElement("canvas");i.setAttribute("style","max-width:100%; max-height:100%; position:absolute; top:0; left:0");var o=document.createElement("canvas");o.setAttribute("style","max-width:100%; max-height:100%; position:absolute; top:0; left:0");var a=document.createElement("canvas");a.setAttribute("style","display:none");var s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),h=document.createElement("div");return c.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: sw-resize; background: transparent; stroke: transparent;"),u.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: se-resize; background: transparent; stroke: transparent;"),l.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: ne-resize; background: transparent; stroke: transparent;"),s.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: nw-resize; background: transparent; stroke: transparent;"),h.setAttribute("style","position: absolute; width: "+t+"px; height: "+t+"px; top: 0px; left: 0px; cursor: all-scroll; background: transparent; stroke: transparent;"),r.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(h),r.appendChild(c),r.appendChild(u),r.appendChild(l),r.appendChild(s),{exportCanvas:a,imageCanvas:i,cropCanvas:o,selectionDiv:h,bottomRightCornerDiv:u,bottomLeftCornerDiv:c,topLeftCornerDiv:s,topRightCornerDiv:l,imageDiv:n,containerDiv:r}}(e.id,t),c=u.imageDiv,h=u.exportCanvas,d=u.imageCanvas,p=u.cropCanvas,v=u.selectionDiv,f=u.bottomRightCornerDiv,y=u.bottomLeftCornerDiv,m=u.topLeftCornerDiv,g=u.topRightCornerDiv,x=u.containerDiv,w=d.getContext("2d");if(!w)throw Error("Not able to create canvas");var b=p.getContext("2d");if(!b)throw Error("Not able to create canvas");var E,C=h.getContext("2d");if(!C)throw Error("Not able to create canvas");var L,T=!1,k=!1,D=!1,R=!1,W=!1,I=new Image;e.imageURL&&(I.src=e.imageURL);var j=function(e,t){return void 0===t&&(t={dataType:"dataURL",imageType:"image/jpeg",imageQuality:1}),i(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){return n={width:h.width,height:h.height,mime:t.imageType},"blob"===t.dataType?[2,h.toBlob((function(t){e(t,n)}),t.imageType,t.imageQuality)]:(e(h.toDataURL(t.imageType,t.imageQuality),n),[2])}))}))};return I.onload=function(){var e=c.clientWidth,u=I.height*(e/I.width);u>I.height&&(u=I.height),x.style.height=u+"px",d.width=I.width,d.height=I.height,p.width=d.clientWidth,p.height=d.clientHeight,p.addEventListener("mouseup",S,!1),p.addEventListener("mousemove",_,!1),w.drawImage(I,0,0),y.addEventListener("mousedown",(function(){k=!0}),!1),y.addEventListener("mouseup",S,!1),y.addEventListener("mousemove",_,!1),m.addEventListener("mousedown",(function(){T=!0}),!1),m.addEventListener("mouseup",S,!1),m.addEventListener("mousemove",_,!1),g.addEventListener("mousedown",(function(){D=!0}),!1),g.addEventListener("mouseup",S,!1),g.addEventListener("mousemove",_,!1),f.addEventListener("mousedown",(function(){R=!0}),!1),f.addEventListener("mouseup",S,!1),f.addEventListener("mousemove",_,!1),v.addEventListener("mousedown",(function(){W=!0}),!1),v.addEventListener("mouseup",S,!1),v.addEventListener("mousemove",_,!1);var A={x:0,y:0,w:d.clientWidth,h:d.clientHeight},O=r({canvasWidth:d.clientWidth,canvasHeight:d.clientHeight},A);function S(){T=D=k=R=W=!1}L&&clearInterval(L),L=setInterval((function(){var e=d.offsetWidth,t=d.offsetHeight;if(O.canvasHeight!=t||O.canvasWidth!=e){var n=e/O.canvasWidth,i=t/O.canvasHeight;O=r(r({},A),{canvasHeight:t,canvasWidth:e}),p.width=e,p.height=t,A.w*=n,A.h*=i,N()}}),500),E=function(){return i(void 0,void 0,void 0,(function(){var e,t,r,i,a,s;return o(this,(function(o){return e=I.width/p.width,t=I.height/p.height,r=A.x*e,i=A.y*t,a=A.w*e,s=A.h*t,h.width=a,h.height=s,C.drawImage(I,r,i,a,s,0,0,a,s),n&&n.cb&&j(n.cb,n.imgArg),[2]}))}))};var M=0,P=0,H=0,z=0;function _(e){if(!c)throw Error("Not able to create canvas");var n=p.getBoundingClientRect(),r=e.clientX-n.x,i=e.clientY-n.y,o=!1;T?(A.w+=A.x-r,A.h+=A.y-i,A.x=r,A.y=i,o=!0):D?(A.w=Math.abs(A.x-r),A.h+=A.y-i,A.y=i,o=!0):k?(A.w+=A.x-r,A.h=Math.abs(A.y-i),A.x=r,o=!0):R?(A.w=Math.abs(A.x-r),A.h=Math.abs(A.y-i),o=!0):W&&(A.x+=r-M,A.y+=i-P,o=!0),o&&(A.w<2*t&&(A.w=2*t,A.x=H),A.h<2*t&&(A.h=2*t,A.y=z),A.x<0&&(A.x=0),A.x+A.w>p.width&&(A.x=p.width-A.w),A.y<0&&(A.y=0),A.y+A.h>p.height&&(A.y=p.height-A.h),N()),M=r,P=i,H=A.x,z=A.y}function N(){if(!b)throw Error("Not able to create canvas");b.clearRect(0,0,p.width,p.height),b.fillStyle=a,b.strokeStyle=s,b.lineWidth=l,b.fillRect(0,0,p.width,p.height),b.clearRect(A.x,A.y,A.w,A.h),b.beginPath(),b.moveTo(A.x,A.y+t),b.lineTo(A.x,A.y),b.lineTo(A.x+t,A.y),b.moveTo(A.x+A.w-t,A.y),b.lineTo(A.x+A.w,A.y),b.lineTo(A.x+A.w,A.y+t),b.moveTo(A.x+A.w,A.y+A.h-t),b.lineTo(A.x+A.w,A.y+A.h),b.lineTo(A.x+A.w-t,A.y+A.h),b.moveTo(A.x+t,A.y+A.h),b.lineTo(A.x,A.y+A.h),b.lineTo(A.x,A.y+A.h-t),b.stroke(),m.style.top=g.style.top=A.y+"px",m.style.left=y.style.left=A.x+"px",g.style.left=f.style.left=A.x+A.w-t+"px",y.style.top=f.style.top=A.y+A.h-t+"px",v.style.top=A.y+"px",v.style.left=A.x+"px",v.style.width=A.w+"px",v.style.height=A.h+"px",E()}N()},{getImage:function(e,t){return i(void 0,void 0,void 0,(function(){return o(this,(function(n){return j(e,t),[2]}))}))},setImageURL:function(e){I.src=e}}}}]);
//# sourceMappingURL=html-canvas-img-resizer.min.js.map